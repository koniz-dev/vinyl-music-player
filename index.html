<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vinyl Music Player - Create Beautiful Music Videos with Lyrics</title>

    <meta name="description"
        content="A beautiful vinyl music player with synchronized lyrics and WebM video export. Create stunning music videos with your favorite songs and share them with the world.">
    <meta name="keywords"
        content="music player, vinyl, lyrics, video export, music video, audio player, synchronized lyrics, WebM export">
    <meta name="author" content="koniz-dev">
    <meta name="robots" content="index, follow">

    <meta property="og:title" content="Vinyl Music Player - Create Beautiful Music Videos">
    <meta property="og:description"
        content="A beautiful vinyl music player with synchronized lyrics and WebM video export functionality.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://github.com/koniz-dev/vinyl-music-player">
    <meta property="og:image" content="favicon/android-chrome-512x512.png">
    <meta property="og:site_name" content="Vinyl Music Player">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Vinyl Music Player - Create Beautiful Music Videos">
    <meta name="twitter:description"
        content="A beautiful vinyl music player with synchronized lyrics and WebM video export functionality.">
    <meta name="twitter:image" content="favicon/android-chrome-512x512.png">

    <meta name="theme-color" content="#6366f1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Vinyl Player">
    <meta name="application-name" content="Vinyl Music Player">
    <meta name="msapplication-TileColor" content="#1e1b4b">
    <meta name="msapplication-config" content="favicon/browserconfig.xml">
    
    <!-- Additional PWA and Performance -->
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    
    <!-- Performance and Security -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="referrer" content="strict-origin-when-cross-origin">

    <link rel="icon" type="image/x-icon" href="favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="js/core/app-state.js" as="script" fetchpriority="high">
    <link rel="preload" href="js/core/event-bus.js" as="script">
    <link rel="preload" href="js/index.js" as="script">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/index.css">
    <link rel="stylesheet" href="styles/toast.css">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Vinyl Music Player",
        "description": "A beautiful vinyl music player with synchronized lyrics and WebM video export. Create stunning music videos with your favorite songs and share them with the world.",
        "url": "https://github.com/koniz-dev/vinyl-music-player",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "koniz-dev"
        },
        "featureList": [
            "Audio file upload and playback",
            "Synchronized lyrics display",
            "WebM video export",
            "Customizable album art",
            "Color customization for lyrics",
            "Responsive design"
        ]
    }
    </script>
</head>

<body>
    <div class="main-header">
        <h1 class="main-title">
            <span class="main-icon">üéµ</span>
            Vinyl Music Player
        </h1>
    </div>

    <div class="container">
        <div class="left-panel">
            <div class="panel-content">
                <div class="settings-container">
                    <div class="header">
                        <h1>
                            <span class="music-icon">üéµ</span>
                            Music Player Controls
                        </h1>
                        <p class="subtitle">Customize your music experience</p>
                    </div>

                    <form id="music-form">
                        <div class="form-group">
                            <div class="form-label">
                                üéµ Audio File<span class="required-asterisk">*</span>
                            </div>
                            <div class="upload-area audio-upload" id="audio-upload-area">
                                <input type="file" accept="audio/*" id="audio-file" aria-label="Upload audio file" aria-describedby="audio-upload-hint">
                                <div class="upload-icon" aria-hidden="true">üéµ</div>
                                <div class="upload-text">Upload MP3 File</div>
                                <div class="upload-hint" id="audio-upload-hint">Click to browse or drag & drop</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="song-title">
                                üìù Song Title<span class="required-asterisk">*</span>
                            </label>
                            <input type="text" class="form-input" id="song-title" placeholder="Enter song title"
                                value="" aria-required="true">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="artist-name">
                                üé§ Song Artist
                            </label>
                            <input type="text" class="form-input" id="artist-name" placeholder="Enter artist name"
                                value="">
                        </div>

                        <div class="form-group">
                            <div class="form-label">
                                üé® Album Art
                            </div>
                            <div class="upload-area" id="upload-area">
                                <input type="file" accept="image/*" id="album-art" aria-label="Upload album art" aria-describedby="album-art-hint">
                                <div class="upload-icon" aria-hidden="true">üì∑</div>
                                <div class="upload-text">Upload Album Art</div>
                                <div class="upload-hint" id="album-art-hint">Click to browse or drag & drop</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="form-label">
                                üìù Lyrics
                            </div>
                            <div class="lyrics-container" id="lyrics-container">
                            </div>
                            <div class="lyrics-buttons-container">
                                <button type="button" class="add-lyrics-btn" id="add-lyrics-btn" aria-label="Add lyrics">
                                    <span class="add-icon">+</span> Add Lyrics
                                </button>
                                <button type="button" class="dev-lyrics-btn" id="dev-lyrics-btn" aria-label="Developer options">
                                    <span class="dev-icon">‚öôÔ∏è</span> For Dev
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="form-label">
                                üé® Lyrics Color
                            </div>
                            <div class="color-settings-container">
                                <div class="color-picker-section">
                                    <input type="color" class="color-picker" id="lyrics-color-picker" value="#ffb3d1" aria-label="Select lyrics color">
                                    <input type="text" class="color-preview-input" id="color-preview-input" placeholder="#ffb3d1" maxlength="7" aria-label="Enter hex color code">
                                    <button type="button" class="copy-hex-btn" id="copy-hex-btn" title="Copy hex code">
                                        <span class="copy-icon">üìã</span>
                                    </button>
                                    <button type="button" class="reset-color-btn" id="reset-color-btn" title="Reset to default color">
                                        <span class="reset-icon">üîÑ</span>
                                    </button>
                                </div>
                                <div class="color-history-section">
                                    <div class="color-history-label">Recent Colors:</div>
                                    <div class="color-history" id="color-history">
                                        <!-- Color history items will be added here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <button type="button" class="export-btn" id="export-btn" disabled aria-label="Export WebM video">
                                <span class="export-icon">üé¨</span> Export WebM Video
                            </button>
                            <button type="button" class="debug-btn debug-btn-hidden" id="debug-btn" aria-label="Check browser support">
                                <span class="debug-icon">üîß</span> Check Browser Support
                            </button>
                            <div class="export-progress export-progress-hidden" id="export-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-fill"></div>
                                </div>
                                <div class="progress-text" id="progress-text">Preparing export...</div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="right-panel">
            <div class="panel-content">
                <div class="vinyl-player-container">
                    <div class="music-player">
                        <div class="vinyl-section">
                            <div class="vinyl-container">
                                <div class="vinyl-record" id="vinyl">
                                    <div class="vinyl-grooves groove-1"></div>
                                    <div class="vinyl-grooves groove-2"></div>
                                    <div class="vinyl-grooves groove-3"></div>
                                    <div class="vinyl-center">
                                        <div class="vinyl-album-art"></div>
                                    </div>
                                </div>
                                <div class="tonearm" id="tonearm"></div>
                            </div>


                            <div class="song-info">
                                <div class="vinyl-song-title"></div>
                                <div class="vinyl-artist-name"></div>
                                <div class="vinyl-lyrics-text"></div>
                            </div>
                        </div>

                        <div class="progress-container">
                            <div class="vinyl-progress-bar">
                                <div class="vinyl-progress"></div>
                            </div>
                            <div class="progress-time">
                                <span class="vinyl-current-time">00:00</span>
                                <span class="vinyl-total-time">00:00</span>
                            </div>
                        </div>

                        <div class="controls" role="group" aria-label="Music player controls">
                            <button type="button" class="control-btn vinyl-mute-btn control-btn-disabled" disabled aria-label="Mute/Unmute">üîä</button>
                            <button type="button" class="control-btn control-btn-disabled" disabled aria-label="Previous track">‚èÆ</button>
                            <button type="button" class="control-btn vinyl-play-pause-btn control-btn-disabled" disabled aria-label="Play/Pause">‚ñ∂</button>
                            <button type="button" class="control-btn control-btn-disabled" disabled aria-label="Next track">‚è≠</button>
                            <button type="button" class="control-btn vinyl-repeat-btn control-btn-disabled" disabled aria-label="Repeat">‚Üª</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay modal-overlay-hidden" id="dev-lyrics-modal" role="dialog" aria-labelledby="modal-title" aria-hidden="true" inert aria-modal="true" tabindex="-1">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">For Dev - Import JSON Lyrics</h3>
                <button type="button" class="modal-close-btn" id="modal-close-btn" aria-label="Close modal">√ó</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    Paste your JSON lyrics here. Format should be an array of objects with <code>start</code> (mm:ss),
                    <code>end</code> (mm:ss), and <code>text</code> properties.
                </p>
                <strong>Example:</strong>
                <div class="json-example">
                    <pre lang="en">[
  {"start": "00:18", "end": "00:21", "text": "I wake up in the familiar room"},
  {"start": "00:22", "end": "00:24", "text": "Where your hand once rested"}
]</pre>
                </div>
                <textarea class="json-textarea" id="json-lyrics-input" placeholder="Paste your JSON lyrics here..."
                    rows="10" aria-label="JSON lyrics input" lang="en"></textarea>
                <div class="modal-actions">
                    <button type="button" class="modal-cancel-btn" id="modal-cancel-btn" aria-label="Cancel">Cancel</button>
                    <button type="button" class="modal-import-btn" id="modal-import-btn" aria-label="Import lyrics">Import Lyrics</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Core systems first -->
    <script src="js/core/app-state.js" defer onerror="console.error('Failed to load app-state.js')"></script>
    <script src="js/core/event-bus.js" defer onerror="console.error('Failed to load event-bus.js')"></script>
    
    <!-- Utilities -->
    <script src="js/utils/time-utils.js" defer onerror="console.error('Failed to load time-utils.js')"></script>
    <script src="js/utils/file-utils.js" defer onerror="console.error('Failed to load file-utils.js')"></script>
    
    <!-- Modules -->
    <script src="js/modules/audio-player.js" defer onerror="console.error('Failed to load audio-player.js')"></script>
    <script src="js/modules/lyrics-manager.js" defer onerror="console.error('Failed to load lyrics-manager.js')"></script>
    <script src="js/modules/vinyl-renderer.js" defer onerror="console.error('Failed to load vinyl-renderer.js')"></script>
    <script src="js/modules/export-manager-canvas.js" defer onerror="console.error('Failed to load export-manager-canvas.js')"></script>
    <script src="js/modules/export-manager.js" defer onerror="console.error('Failed to load export-manager.js')"></script>
    <script src="js/modules/lyrics-color-manager.js" defer onerror="console.error('Failed to load lyrics-color-manager.js')"></script>
    <script src="js/modules/settings-manager.js" defer onerror="console.error('Failed to load settings-manager.js')"></script>
    
    <!-- Toast system -->
    <script src="js/toast.js" defer onerror="console.error('Failed to load toast.js')"></script>
    
    <!-- Main app -->
    <script src="js/index.js" defer onerror="console.error('Failed to load index.js')"></script>
    
    <!-- Fallback for browsers that don't support modern features -->
    <noscript>
        <div class="noscript-message">
            <h2>JavaScript Required</h2>
            <p>This application requires JavaScript to function properly. Please enable JavaScript in your browser settings.</p>
        </div>
    </noscript>
</body>

</html>